### Игра «Камень, ножницы, бумага»

[![Lang: EN](https://img.shields.io/badge/lang-EN-red)](README.md)
[![Python](https://img.shields.io/badge/python-3.10%2B-blue)](#зависимости-для-запуска)
[![License](https://img.shields.io/badge/license-MIT-green)](LICENSE)
[![Tests](https://img.shields.io/badge/tests-pytest-blue)](#тестирование)
[![Clean Architecture](https://img.shields.io/badge/architecture-clean%20architecture-orange)](#архитектура)


#### Описание задачи:

- [EN](/TASK_EN.md)
- [RU](/TASK_RU.md)

#### Содержание:

- [Описание](#описание)
- [Зависимости для запуска](#зависимости-для-запуска)
- [Инструкция по запуску](#инструкция-по-запуску)
- [Тестирование](#тестирование)
- [Архитектура](#архитектура)
- [Отчёт об ошибках](#отчёт-об-ошибках)
- [Лицензия](#лицензия)

---

#### Описание:

Rochambeau — это консольная реализация классической игры «Камень, ножницы, бумага», построенная на принципах Чистой архитектуры [подробнее](#архитектура). 

Игра поддерживает 3 режима:
   - Игрок против игрока (оба вводят ходы вручную).  
   - Игрок против ИИ (один ход вводится вручную, другой генерируется автоматически).  
   - ИИ против ИИ (оба хода генерируются случайным образом).

Каждая игра продолжается до достижения заданного количества побед одним из игроков.
Ходы, результат каждого раунда и финальный счёт отображаются в консоли.
Дополнительно ведётся логирование — все действия и ошибки записываются в лог-файл.

---

#### Зависимости для запуска:

- Рекомендуется Python 3.12, совместимо с Python 3.10+
- Внешние библиотеки: не требуются
- Установка зависимостей: отсутствует

---

### Инструкция по запуску

1. Клонируйте репозиторий:

   ```bash
   git clone https://github.com/artemy-sh/rochambeau.git
   cd rochambeau
   ```

2. Запустите игру:

   ```bash
   python3 src/main.py
   ```

---

#### Примеры запуска:

- Указать режим и количество побед:

  ```bash
  python3 src/main.py --mode ha --rounds 3
  ```

- Установить уровень логирования DEBUG:

  ```bash
  python3 src/main.py --log-level debug
  ```

- Получить справку по параметрам:

  ```bash
  python3 src/main.py --help
  ```

---

#### Тестирование:


1. Установите `pytest`:

  ```bash
  pip install pytest
  ```

2. Укажите путь к исходникам:

  - На Unix / macOS:
    ```bash
    export PYTHONPATH=src:tests
    ```
  - На Windows (cmd):
    ```cmd
    set PYTHONPATH=src;tests
    ```

3. Запустите тесты из корня проекта:

  ```bash
  pytest
  ```


#### Архитектура:

Проект построен по принципам **Чистой архитектуры (Clean Architecture)**, обеспечивая изоляцию бизнес-логики от внешних интерфейсов. Все зависимости направлены **внутрь**, от периферии к ядру.

#### Структура слоёв:

```
entrypoints
    │
    └── adapters
            │
            └── application
                    │
                    └── domain
```

#### Описание слоёв:

- **domain**  
  Ядро приложения: здесь определены основные бизнес-сущности (`Game`, `Player`, `Move`, `Result`, `GameSettings`) и интерфейсы ядра (`IGame`, `IPlayer`). Не зависит ни от одного другого слоя и не взаимодействует с внешней инфраструктурой.

- **application**  
  Сценарии использования (интеракторы), реализуют поведение, основанное на домене. Содержит:
  - `ports`: интерфейс генератора хода ИИ (`IMoveProvider`)
  - `services`: интерфейс логирования (`ILogger`)
  - Интеракторы (`StartGame`, `PlayRound`) зависят от интерфейсов, а не от конкретных реализаций.

- **adapters**  
  Слой адаптеров, реализующих конкретные зависимости:
  - `controllers`: управление процессом игры (`CliController`)
  - `presenters`: форматирование и представление результата (`CliPresenter`)
  - `providers`: генераторы ходов ИИ (`RandomMoveProvider`)
  - `loggers`: логгеры (`Logger`) и обработчики (`get_console_handler`, `get_file_handler`)

  Все адаптеры реализуют интерфейсы из слоёв `application` или `domain`.

- **entrypoints**  
  Точка входа в приложение.  
  Отвечает за:
  - Чтение аргументов CLI (`parse_args`)
  - Инициализацию зависимостей (`DIContainer`)
  - Запуск игры (`entrypoint`, `main.py`)

---

#### Особенности:

- Архитектура позволяет легко:
  - Заменить CLI на API или Web-интерфейс
  - Подключить другой генератор хода ИИ игрока
  - Расширять функциональность без изменения бизнес-логики
- Все зависимости инвертированы: application зависит от абстракций, а не реализаций
- Логгирование, ввод, генерация ходов и форматирование результата — это адаптеры, не влияющие на бизнес-логику

---

### Контакты

- **Автор**: Артемий Шалыгин
- **Email**: [artemy.sh@gmail.com](mailto:artemy.sh@gmail.com)  
- **Telegram**: [@artemy_sh](https://t.me/artemy_sh)  

---

#### Отчёт об ошибках:

Если вы нашли баг или хотите предложить улучшение — создайте issue в репозитории.

---

#### Лицензия:

[MIT License](/LICENSE)